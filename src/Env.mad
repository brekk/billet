import type { Trace } from "@/Processor"

import Dict from "Dictionary"
import { fromMaybe } from "Maybe"

import { makeStyledProcessor } from "@/Processor"
import Tag from "@/Tag"



getEnvWithKey :: String -> Dictionary String String -> List Tag
getEnvWithKey = (key, env) => pipe(
  Dict.get(key),
  map(Tag.parseTags),
  fromMaybe([]),
)(env)

export makeAwareProcessor = (key, call, seedPrefix, env) => makeStyledProcessor(
  seedPrefix,
  call,
  getEnvWithKey(key, env),
)
